import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as be,t as g,g as r,a as ge,$ as xe,s as i,c as l,b as a,m as s,n as he,r as o}from"../chunks/PWWI3Ue3.js";import{t as v,h as _e,e as x,a as n,s as k,b as Q}from"../chunks/BC15lkC2.js";import{i as p}from"../chunks/BsCQza_p.js";import{e as ye,i as we}from"../chunks/FrGZEVpv.js";import{r as D}from"../chunks/CjOiFDoo.js";import{t as V,f as W}from"../chunks/CtkfvfXh.js";import{b as $}from"../chunks/CO0VHtSE.js";import{p as ke}from"../chunks/CWmzcjye.js";import{i as Ee}from"../chunks/BEc5jUYy.js";import{o as Ge}from"../chunks/D93VaLay.js";import{g as z}from"../chunks/C5OadaZi.js";import{c as Le}from"../chunks/BcYMahjX.js";var Ce=v('<div class="mb-6 rounded-lg bg-green-100 p-4 text-green-800">Group created successfully! Redirecting to your profile...</div>'),Ue=v('<div class="mb-6 rounded-lg bg-red-100 p-4 text-red-800"> </div>'),Ie=v('<p class="mt-1 text-sm text-red-600"> </p>'),Ne=v('<p class="mt-1 text-sm text-red-600"> </p>'),Re=v('<li class="flex items-center justify-between rounded bg-gray-50 px-3 py-2"><span> </span> <button type="button" class="text-gray-500 hover:text-red-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></li>'),Me=v('<div class="mt-3 rounded border border-gray-200 p-3"><h4 class="mb-2 font-medium">Invitees:</h4> <ul class="space-y-2"></ul></div>'),Ae=v('<div class="min-h-screen bg-white py-8"><div class="container mx-auto max-w-2xl px-4"><div class="mb-6 flex items-center"><button class="mr-4 flex items-center text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg> <span class="ml-1">Back</span></button> <h1 class="text-2xl font-bold">Create New Group</h1></div> <!> <!> <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><form><div class="mb-4"><label for="groupName" class="mb-2 block font-medium text-gray-700">Group Name <span class="text-red-500">*</span></label> <input type="text" id="groupName" class="w-full rounded border border-gray-300 px-3 py-2 focus:border-black focus:outline-none" placeholder="Enter group name"> <!></div> <div class="mb-4"><label for="imageUrl" class="mb-2 block font-medium text-gray-700">Group Image URL (optional)</label> <input type="text" id="imageUrl" class="w-full rounded border border-gray-300 px-3 py-2 focus:border-black focus:outline-none" placeholder="Enter image URL"></div> <div class="mb-4"><label class="mb-2 block font-medium text-gray-700">Invite Members (by email)</label> <div class="mb-2 flex"><input type="email" class="flex-grow rounded-l border border-gray-300 px-3 py-2 focus:border-black focus:outline-none" placeholder="Enter email address"> <button type="button" class="rounded-r bg-gray-800 px-4 py-2 text-white hover:bg-black">Add</button></div> <!> <!></div> <div class="mt-6"><button type="submit" class="w-full rounded bg-black px-4 py-2 font-medium text-white hover:bg-gray-800 disabled:bg-gray-400"><!></button></div></form></div></div></div>');function Qe(X,Y){be(Y,!1);let f=s(!1),b=s(null),H=s(!1),h=s(""),_=s(""),m=s(""),d=s([]),y=s(null),c=s(null);Ge(async()=>{try{const e=await fetch("/api/auth/me");if(!e.ok&&e.status===401){z("/auth/login");return}}catch(e){console.error("Authentication check failed:",e),a(b,"Authentication check failed")}});function P(){if(!r(m)){a(c,"Please enter an email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r(m))){a(c,"Please enter a valid email");return}if(r(d).some(t=>t.email===r(m))){a(c,"This email is already in the list");return}a(d,[...r(d),{email:r(m)}]),a(m,""),a(c,null)}function Z(e){a(d,r(d).filter(t=>t.email!==e))}async function ee(){if(a(y,null),a(b,null),!r(h).trim()){a(y,"Group name is required");return}try{a(f,!0);const e={name:r(h).trim(),invitees:r(d)};r(_).trim()&&(e.imageUrl=r(_).trim()),await Le(e),a(H,!0),a(f,!1),setTimeout(()=>{z("/profile")},2e3)}catch(e){console.error("Error creating group:",e),a(b,e instanceof Error?e.message:"Failed to create group"),a(f,!1)}}Ee();var E=Ae();_e(e=>{xe.title="Create Group"});var T=l(E),G=l(T),re=l(G);he(2),o(G);var j=i(G,2);{var te=e=>{var t=Ce();V(3,t,()=>W),n(e,t)};p(j,e=>{r(H)&&e(te)})}var q=i(j,2);{var ae=e=>{var t=Ue(),u=l(t,!0);o(t),g(()=>k(u,r(b))),V(3,t,()=>W),n(e,t)};p(q,e=>{r(b)&&e(ae)})}var F=i(q,2),L=l(F),C=l(L),U=i(l(C),2);D(U);var oe=i(U,2);{var le=e=>{var t=Ie(),u=l(t,!0);o(t),g(()=>k(u,r(y))),n(e,t)};p(oe,e=>{r(y)&&e(le)})}o(C);var I=i(C,2),S=i(l(I),2);D(S),o(I);var N=i(I,2),R=i(l(N),2),w=l(R);D(w);var ie=i(w,2);o(R);var J=i(R,2);{var se=e=>{var t=Ne(),u=l(t,!0);o(t),g(()=>k(u,r(c))),n(e,t)};p(J,e=>{r(c)&&e(se)})}var ne=i(J,2);{var de=e=>{var t=Me(),u=i(l(t),2);ye(u,5,()=>r(d),we,(ce,O)=>{var A=Re(),B=l(A),pe=l(B,!0);o(B);var fe=i(B,2);o(A),g(()=>k(pe,r(O).email)),x("click",fe,()=>Z(r(O).email)),n(ce,A)}),o(u),o(t),n(e,t)};p(ne,e=>{r(d).length>0&&e(de)})}o(N);var K=i(N,2),M=l(K),ue=l(M);{var me=e=>{var t=Q("Creating Group...");n(e,t)},ve=e=>{var t=Q("Create Group");n(e,t)};p(ue,e=>{r(f)?e(me):e(ve,!1)})}o(M),o(K),o(L),o(F),o(T),o(E),g(()=>M.disabled=r(f)),x("click",re,()=>z("/profile")),$(U,()=>r(h),e=>a(h,e)),$(S,()=>r(_),e=>a(_,e)),$(w,()=>r(m),e=>a(m,e)),x("keydown",w,e=>e.key==="Enter"&&(e.preventDefault(),P())),x("click",ie,P),x("submit",L,ke(ee)),n(X,E),ge()}export{Qe as component};
