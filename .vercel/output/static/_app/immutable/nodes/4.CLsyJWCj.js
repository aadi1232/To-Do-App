import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as O,t as h,g as r,a as T,s as n,c as a,m as p,r as s,n as U,b as t}from"../chunks/PWWI3Ue3.js";import{t as q,e as C,a as _,s as k}from"../chunks/BC15lkC2.js";import{i as J}from"../chunks/BsCQza_p.js";import{r as S}from"../chunks/CjOiFDoo.js";import{b as j}from"../chunks/CO0VHtSE.js";import{p as N}from"../chunks/CWmzcjye.js";import{i as $}from"../chunks/BEc5jUYy.js";import{g as z}from"../chunks/C5OadaZi.js";var B=q('<div class="mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700"> </div>'),F=q(`<div class="flex min-h-screen items-center justify-center bg-white"><div class="w-full max-w-md rounded-md border border-gray-300 p-8"><h1 class="mb-6 text-center text-2xl font-bold">Log In</h1> <!> <form><div class="mb-4"><label for="username" class="mb-1 block text-sm font-medium text-gray-700">Username</label> <input id="username" type="text" class="w-full rounded-md border border-gray-300 px-3 py-2" required></div> <div class="mb-6"><label for="password" class="mb-1 block text-sm font-medium text-gray-700">Password</label> <input id="password" type="password" class="w-full rounded-md border border-gray-300 px-3 py-2" required></div> <button type="submit" class="w-full rounded-md bg-black py-2 text-white hover:bg-gray-800 disabled:opacity-50"> </button></form> <div class="mt-4 text-center"><p class="text-sm text-gray-600">Don't have an account? <a href="/auth/signup" class="text-black underline">Sign Up</a></p></div></div></div>`);function Z(D,E){O(E,!1);let d=p(""),l=p(""),m=p(!1),o=p("");async function P(){if(t(o,""),!r(d)||!r(l)){t(o,"All fields are required");return}t(m,!0);try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r(d),password:r(l)})}),i=await e.json();if(!e.ok)throw e.status===503?new Error(`Service unavailable: ${i.error||"Database connection failed"}`):new Error(i.message||"Something went wrong");z("/")}catch(e){e instanceof Error?t(o,e.message):t(o,"An unknown error occurred")}finally{t(m,!1)}}$();var u=F(),g=a(u),x=n(a(g),2);{var A=e=>{var i=B(),L=a(i,!0);s(i),h(()=>k(L,r(o))),_(e,i)};J(x,e=>{r(o)&&e(A)})}var c=n(x,2),b=a(c),w=n(a(b),2);S(w),s(b);var f=n(b,2),y=n(a(f),2);S(y),s(f);var v=n(f,2),I=a(v,!0);s(v),s(c),U(2),s(g),s(u),h(()=>{v.disabled=r(m),k(I,r(m)?"Processing...":"Log In")}),j(w,()=>r(d),e=>t(d,e)),j(y,()=>r(l),e=>t(l,e)),C("submit",c,N(P)),_(D,u),T()}export{Z as component};
