import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as oa,a as ra,s,c as t,g as e,m as F,r as a,b as D,t as h,f as q,n as na}from"../chunks/PWWI3Ue3.js";import{t as d,a as i,s as c,e as ia}from"../chunks/BC15lkC2.js";import{i as u}from"../chunks/BsCQza_p.js";import{e as da,i as la}from"../chunks/FrGZEVpv.js";import{i as va}from"../chunks/BEc5jUYy.js";import{o as ca}from"../chunks/D93VaLay.js";var pa=d('<div class="rounded-md bg-blue-50 p-4"><p class="text-blue-700">Testing MongoDB connection...</p></div>'),ma=d('<div class="rounded-md bg-red-50 p-4"><h2 class="mb-2 text-xl font-bold text-red-700">Connection Error</h2> <p class="text-red-600"> </p></div>'),ua=d('<li class="font-mono text-sm"> </li>'),ba=d('<div class="rounded-md bg-gray-50 p-4"><h3 class="mb-2 text-lg font-semibold">Collections</h3> <ul class="list-inside list-disc"></ul></div>'),fa=d('<div class="mb-4 rounded-md bg-green-50 p-4"><h2 class="mb-2 text-xl font-bold text-green-700">✅ Connection Successful!</h2> <p class="mb-2">Connected to MongoDB database.</p></div> <div class="mb-4 rounded-md bg-gray-50 p-4"><h3 class="mb-2 text-lg font-semibold">Connection Details</h3> <div class="grid grid-cols-1 gap-2"><div><span class="font-medium">MongoDB Host:</span> <span class="rounded bg-gray-100 px-1 font-mono"> </span></div> <div><span class="font-medium">Database Name:</span> <span class="rounded bg-gray-100 px-1 font-mono"> </span></div> <div><span class="font-medium">Public IP:</span> <span class="rounded bg-gray-100 px-1 font-mono"> </span></div></div></div> <!>',1),ga=d('<div class="mt-4 rounded-md bg-red-100 p-3"><h3 class="mb-1 font-medium">Guidance:</h3> <p> </p></div>'),_a=d('<div class="mt-4"><p>Your public IP address is: <span class="font-mono"> </span></p> <p class="mt-1 text-sm">Make sure this IP is allowed in your MongoDB Atlas Network Access settings.</p></div>'),xa=d('<div class="mb-4 rounded-md bg-red-50 p-4"><h2 class="mb-2 text-xl font-bold text-red-700">❌ Connection Failed</h2> <p class="mb-2 text-red-600"> </p> <!> <!></div>'),ha=d('<!> <div class="mt-6"><button class="rounded bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-700">Test Connection Again</button></div>',1),wa=d('<div class="container mx-auto max-w-4xl p-4"><h1 class="mb-6 text-3xl font-bold">MongoDB Connection Test</h1> <!></div>');function Ua(z,J){oa(J,!1);let o=F(null),M=F(!0),U=F(null);async function G(){try{D(M,!0);const w=await(await fetch("/api/public-test-mongo")).json();D(o,w),D(M,!1)}catch(r){console.error("Error testing connection:",r),D(U,r.message),D(M,!1)}}ca(()=>{G()}),va();var A=wa(),K=s(t(A),2);{var L=r=>{var w=pa();i(r,w)},O=(r,w)=>{{var Q=b=>{var y=ma(),I=s(t(y),2),C=t(I,!0);a(I),a(y),h(()=>c(C,e(U))),i(b,y)},V=(b,y)=>{{var I=C=>{var H=ha(),R=q(H);{var W=f=>{var g=fa(),p=s(q(g),2),B=s(t(p),2),_=t(B),P=s(t(_),2),T=t(P,!0);a(P),a(_);var k=s(_,2),n=s(t(k),2),l=t(n,!0);a(n),a(k);var v=s(k,2),m=s(t(v),2),E=t(m,!0);a(m),a(v),a(B),a(p);var $=s(p,2);{var aa=N=>{var x=ba(),Y=s(t(x),2);da(Y,5,()=>e(o).collections,la,(ta,sa)=>{var j=ua(),ea=t(j,!0);a(j),h(()=>c(ea,e(sa))),i(ta,j)}),a(Y),a(x),i(N,x)};u($,N=>{var x;((x=e(o).collections)==null?void 0:x.length)>0&&N(aa)})}h(()=>{c(T,e(o).host||"Unknown"),c(l,e(o).database||"Unknown"),c(E,e(o).publicIp||"Unknown")}),i(f,g)},X=f=>{var g=xa(),p=s(t(g),2),B=t(p,!0);a(p);var _=s(p,2);{var P=n=>{var l=ga(),v=s(t(l),2),m=t(v,!0);a(v),a(l),h(()=>c(m,e(o).guidance)),i(n,l)};u(_,n=>{e(o).guidance&&n(P)})}var T=s(_,2);{var k=n=>{var l=_a(),v=t(l),m=s(t(v)),E=t(m,!0);a(m),a(v),na(2),a(l),h(()=>c(E,e(o).publicIp)),i(n,l)};u(T,n=>{e(o).publicIp&&n(k)})}a(g),h(()=>c(B,e(o).error||"Unknown error occurred")),i(f,g)};u(R,f=>{e(o).success?f(W):f(X,!1)})}var S=s(R,2),Z=t(S);a(S),ia("click",Z,G),i(C,H)};u(b,C=>{e(o)&&C(I)},y)}};u(r,b=>{e(U)?b(Q):b(V,!1)},w)}};u(K,r=>{e(M)?r(L):r(O,!1)})}a(A),i(z,A),ra()}export{Ua as component};
