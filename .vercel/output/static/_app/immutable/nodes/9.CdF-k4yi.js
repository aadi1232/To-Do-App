import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ce,a as me,$ as fe,b as k,m as P,s as c,c as a,g as e,r,t as j,f as ue,d as V}from"../chunks/PWWI3Ue3.js";import{t as i,h as ge,a as o,s as M,e as W}from"../chunks/BC15lkC2.js";import{i as p}from"../chunks/BsCQza_p.js";import{e as X,i as Z}from"../chunks/FrGZEVpv.js";import{s as H}from"../chunks/CjOiFDoo.js";import{i as pe}from"../chunks/BEc5jUYy.js";import{o as he}from"../chunks/D93VaLay.js";import{g as $,a as xe,r as _e}from"../chunks/BcYMahjX.js";var be=i('<div class="flex h-48 items-center justify-center"><div class="animate-pulse text-gray-500">Loading...</div></div>'),we=i('<div class="mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-red-700"><p> </p></div>'),ye=i('<img class="h-full w-full object-cover">'),ke=i('<div class="flex h-full w-full items-center justify-center bg-blue-500 text-sm font-medium text-white"> </div>'),je=i('<div class="rounded-lg border border-gray-100 bg-white p-4 shadow-sm transition hover:shadow-md"><div class="flex items-center"><div class="mr-3 h-10 w-10 shrink-0 overflow-hidden rounded-full border border-gray-100 bg-gray-50"><!></div> <div class="flex-grow"><h3 class="font-medium text-gray-800"> </h3> <p class="text-xs text-gray-500"> </p></div> <div class="ml-2 flex space-x-2"><button class="rounded-md bg-blue-600 px-3 py-1 text-xs font-medium text-white transition hover:bg-blue-700">Accept</button> <button class="rounded-md border border-gray-200 bg-white px-3 py-1 text-xs font-medium text-gray-700 transition hover:bg-gray-50">Decline</button></div></div></div>'),Me=i('<div class="mb-10"><h2 class="mb-4 text-xl font-medium text-gray-700">Pending Invitations</h2> <div class="grid grid-cols-1 gap-3"></div></div>'),Ce=i('<img class="h-full w-full object-cover">'),Ue=i('<div class="flex h-full w-full items-center justify-center bg-blue-500 text-sm font-medium text-white"> </div>'),Be=i('<a class="block rounded-lg border border-gray-100 bg-white p-4 shadow-sm transition hover:shadow-md"><div class="flex items-center"><div class="mr-3 h-10 w-10 shrink-0 overflow-hidden rounded-full border border-gray-100 bg-gray-50"><!></div> <div><h3 class="font-medium text-gray-800"> </h3> <p class="text-xs text-gray-500"> </p></div></div></a>'),Ge=i('<div><div class="grid grid-cols-1 gap-3"></div></div>'),Ie=i(`<div class="flex flex-col items-center justify-center py-16"><div class="mb-6 text-center"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <p class="mt-2 text-lg text-gray-600">You don't have any groups yet</p> <p class="text-gray-500">Create a group to collaborate with others</p></div> <a href="/groups/create" class="inline-flex items-center rounded-md bg-black px-5 py-2.5 text-sm font-medium text-white hover:bg-gray-900 focus:ring-4 focus:ring-black focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Create a Group</a></div>`),Ae=i("<!> <!>",1),De=i('<div class="mt-8 flex justify-center"><a href="/groups/create" class="inline-flex items-center rounded-md bg-black px-5 py-2.5 text-sm font-medium text-white hover:bg-gray-900 focus:ring-4 focus:ring-black focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Create a New Group</a></div>'),Ee=i('<div class="container mx-auto max-w-6xl px-4 py-6"><h1 class="mb-6 text-2xl font-bold text-gray-800">My Groups</h1> <!> <!></div>');function Je(ee,re){ce(re,!1);let I=P([]),C=P([]),O=P(!0),z=P(null),F="";he(async()=>{try{const t=await fetch("/api/auth/me");t.ok&&(F=(await t.json())._id);const[l,d]=await Promise.all([$(),xe()]);k(I,l),k(C,d.filter(h=>h?typeof h.createdBy=="object"?h.createdBy._id!==F:h.createdBy!==F:!1))}catch(t){console.error("Error fetching groups data:",t),k(z,t instanceof Error?t.message:"Failed to load groups")}finally{k(O,!1)}});async function Q(t,l){try{if(await _e(t,l),k(C,e(C).filter(d=>d._id!==t)),l==="accepted"){const d=await $();k(I,d)}}catch(d){console.error("Error responding to invitation:",d),k(z,d instanceof Error?d.message:"Failed to respond to invitation")}}pe();var R=Ee();ge(t=>{fe.title="My Groups | To-Do App"});var S=c(a(R),2);{var te=t=>{var l=be();o(t,l)},ae=(t,l)=>{{var d=U=>{var B=we(),A=a(B),T=a(A,!0);r(A),r(B),j(()=>M(T,e(z))),o(U,B)},h=U=>{var B=Ae(),A=ue(B);{var T=v=>{var m=Me(),x=c(a(m),2);X(x,5,()=>e(C),Z,(_,s)=>{var u=je(),D=a(u),b=a(D),q=a(b);{var L=g=>{var y=ye();j(()=>{H(y,"src",e(s).imageUrl),H(y,"alt",e(s).name)}),o(g,y)},N=g=>{var y=ke(),ve=a(y,!0);r(y),j(ne=>M(ve,ne),[()=>e(s).name.charAt(0).toUpperCase()],V),o(g,y)};p(q,g=>{e(s).imageUrl?g(L):g(N,!1)})}r(b);var G=c(b,2),w=a(G),Y=a(w,!0);r(w);var E=c(w,2),J=a(E);r(E),r(G);var f=c(G,2),n=a(f),K=c(n,2);r(f),r(D),r(u),j(()=>{M(Y,e(s).name),M(J,`Invited by ${e(s).createdBy.username??""}`)}),W("click",n,()=>Q(e(s)._id,"accepted")),W("click",K,()=>Q(e(s)._id,"declined")),o(_,u)}),r(x),r(m),o(v,m)};p(A,v=>{e(C).length>0&&v(T)})}var ie=c(A,2);{var de=v=>{var m=Ge(),x=a(m);X(x,5,()=>e(I),Z,(_,s)=>{var u=Be(),D=a(u),b=a(D),q=a(b);{var L=f=>{var n=Ce();j(()=>{H(n,"src",e(s).imageUrl),H(n,"alt",e(s).name)}),o(f,n)},N=f=>{var n=Ue(),K=a(n,!0);r(n),j(g=>M(K,g),[()=>e(s).name.charAt(0).toUpperCase()],V),o(f,n)};p(q,f=>{e(s).imageUrl?f(L):f(N,!1)})}r(b);var G=c(b,2),w=a(G),Y=a(w,!0);r(w);var E=c(w,2),J=a(E);r(E),r(G),r(D),r(u),j(()=>{H(u,"href",`/groups/${e(s)._id??""}`),M(Y,e(s).name),M(J,`${e(s).members.length??""} members`)}),o(_,u)}),r(x),r(m),o(v,m)},le=(v,m)=>{{var x=_=>{var s=Ie();o(_,s)};p(v,_=>{e(C).length===0&&_(x)},m)}};p(ie,v=>{e(I).length>0?v(de):v(le,!1)})}o(U,B)};p(t,U=>{e(z)?U(d):U(h,!1)},l)}};p(S,t=>{e(O)?t(te):t(ae,!1)})}var se=c(S,2);{var oe=t=>{var l=De();o(t,l)};p(se,t=>{e(I).length>0&&t(oe)})}r(R),o(ee,R),me()}export{Je as component};
