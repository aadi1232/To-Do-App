import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Be,a as Le,c as r,b as R,m as $,g as e,t as m,$ as Te,s as l,r as t,f as ze,d as y,n as Fe}from"../chunks/PWWI3Ue3.js";import{t as n,h as He,e as ne,a as d,s as v}from"../chunks/BC15lkC2.js";import{i as h}from"../chunks/BsCQza_p.js";import{e as ce,i as pe}from"../chunks/FrGZEVpv.js";import{s as H}from"../chunks/CjOiFDoo.js";import{s as ee}from"../chunks/DBYvBCBS.js";import{t as qe,f as Ge}from"../chunks/CtkfvfXh.js";import{i as Ne}from"../chunks/BEc5jUYy.js";import{s as Ye,a as Je}from"../chunks/6avubi_o.js";import{p as Ke}from"../chunks/DZk701PN.js";import{g as te}from"../chunks/C5OadaZi.js";import{o as Oe}from"../chunks/D93VaLay.js";var Qe=n("<div> </div>"),Ve=n('<div class="flex h-64 items-center justify-center"><div class="animate-pulse text-gray-600">Loading group...</div></div>'),We=n('<div class="rounded-lg border border-gray-200 bg-white p-6 text-center shadow-sm"><p class="mb-4 text-gray-700"> </p> <button class="rounded bg-black px-4 py-2 text-white hover:bg-gray-800">Return to Profile</button></div>'),Xe=n('<img class="h-24 w-24 rounded-full border-2 border-gray-200 object-cover">'),Ze=n('<div class="flex h-24 w-24 items-center justify-center rounded-full border-2 border-gray-200 bg-gray-100 text-2xl font-semibold text-gray-700"> </div>'),et=n('<div class="mt-2"><span> </span></div>'),tt=n('<img class="h-10 w-10 rounded-full object-cover">'),rt=n('<div class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-sm font-semibold text-gray-700"> </div>'),at=n('<li class="flex items-center justify-between py-3"><div class="flex items-center"><div class="h-10 w-10"><!></div> <div class="ml-3"><p class="font-medium"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center"><span> </span></div></li>'),st=n('<li class="flex items-center justify-between py-3"><div class="flex items-center"><div class="h-8 w-8"><div class="flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-sm font-semibold text-gray-400">?</div></div> <div class="ml-3"><p class="font-medium"> </p> <p class="text-sm text-gray-500"> </p></div></div> <div class="text-sm text-gray-500">Pending</div></li>'),it=n('<div class="mt-6"><h3 class="mb-2 text-lg font-medium">Pending Invitations</h3> <ul class="divide-y divide-gray-200"></ul></div>'),ot=n('<div class="mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><div class="flex flex-col items-center gap-6 md:flex-row md:items-start"><div class="relative h-24 w-24"><!></div> <div><h1 class="text-2xl font-bold"> </h1> <p class="mt-1 text-gray-600"> </p> <p class="mt-2 text-sm text-gray-500"> </p> <!></div></div></div> <div class="mb-6 border-b border-gray-200"><nav class="-mb-px flex space-x-8"><a href="#todos" class="border-b-2 border-black px-1 py-4 text-sm font-medium">To-Dos</a> <a href="#members" class="px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700">Members</a> <a href="#settings" class="px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700">Settings</a></nav></div> <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h2 class="mb-4 border-b border-gray-200 pb-2 text-xl font-semibold">Members</h2> <ul class="divide-y divide-gray-200"></ul> <!></div>',1),lt=n('<div class="min-h-screen bg-white"><!> <div class="container mx-auto max-w-4xl p-6"><div class="mb-6"><button class="flex items-center text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg> <span class="ml-1">Back to Profile</span></button></div> <!></div></div>');function $t(ue,me){Be(me,!1);const[ge,fe]=Je(),xe=Ye(Ke,"$page",ge).params.id;let o=$(null),q=$(!0),G=$(null),x=null,S=$(null),re=$(null),_e=$("success");Oe(async()=>{try{const s=await fetch("/api/auth/me");if(!s.ok){if(s.status===401){te("/auth/login");return}throw new Error("Authentication failed")}x=await s.json();const c=await fetch(`/api/groups/${xe}`);if(!c.ok)throw new Error("Failed to fetch group details");const j=await c.json();if(R(o,j.group),e(o)&&x){const P=e(o).members.find(g=>typeof g.user=="string"?g.user===(x==null?void 0:x._id):g.user._id===(x==null?void 0:x._id));P&&R(S,P.role)}R(q,!1)}catch(s){console.error("Error loading group:",s),R(G,s instanceof Error?s.message:"Failed to load group"),R(q,!1)}});function D(s){return typeof s.user=="string"?"Unknown User":s.user.username}function ae(s){return typeof s.user=="string"?"":s.user.email}function se(s){switch(s){case"admin":return"bg-red-100 text-red-800";case"co-lead":return"bg-purple-100 text-purple-800";case"elder":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}Ne();var N=lt();He(s=>{m(()=>Te.title=`${(e(o)?e(o).name:"Group")??""} | To-Do App`)});var ie=r(N);{var be=s=>{var c=Qe(),j=r(c,!0);t(c),m(()=>{ee(c,1,`fixed top-4 right-4 z-50 rounded-lg p-4 shadow-lg ${e(_e)==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),v(j,e(re))}),qe(3,c,()=>Ge),d(s,c)};h(ie,s=>{e(re)&&s(be)})}var oe=l(ie,2),Y=r(oe),he=r(Y);t(Y);var ye=l(Y,2);{var we=s=>{var c=Ve();d(s,c)},$e=(s,c)=>{{var j=g=>{var k=We(),M=r(k),A=r(M,!0);t(M);var U=l(M,2);t(k),m(()=>v(A,e(G))),ne("click",U,()=>te("/profile")),d(g,k)},P=(g,k)=>{{var M=A=>{var U=ot(),J=ze(U),le=r(J),K=r(le),je=r(K);{var ke=i=>{var a=Xe();m(()=>{H(a,"src",e(o).imageUrl),H(a,"alt",e(o).name)}),d(i,a)},Me=i=>{var a=Ze(),p=r(a,!0);t(a),m(u=>v(p,u),[()=>e(o).name.charAt(0).toUpperCase()],y),d(i,a)};h(je,i=>{e(o).imageUrl&&e(o).imageUrl.length>2?i(ke):i(Me,!1)})}t(K);var de=l(K,2),O=r(de),Ae=r(O,!0);t(O);var Q=l(O,2),Ce=r(Q);t(Q);var V=l(Q,2),Ee=r(V);t(V);var Ie=l(V,2);{var Re=i=>{var a=et(),p=r(a),u=r(p);t(p),t(a),m(_=>{ee(p,1,`rounded-full px-3 py-1 text-xs font-medium ${_??""}`),v(u,`Your role: ${e(S)??""}`)},[()=>se(e(S))],y),d(i,a)};h(Ie,i=>{e(S)&&i(Re)})}t(de),t(le),t(J);var ve=l(J,4),W=l(r(ve),2);ce(W,5,()=>e(o).members.filter(i=>i.invitationStatus==="accepted"),pe,(i,a)=>{var p=at(),u=r(p),_=r(u),C=r(_);{var B=b=>{var f=tt();m(I=>{H(f,"src",e(a).user.profileImage),H(f,"alt",I)},[()=>D(e(a))],y),d(b,f)},L=b=>{var f=rt(),I=r(f,!0);t(f),m(Ue=>v(I,Ue),[()=>D(e(a)).charAt(0).toUpperCase()],y),d(b,f)};h(C,b=>{typeof e(a).user!="string"&&e(a).user.profileImage&&e(a).user.profileImage.length>2?b(B):b(L,!1)})}t(_);var w=l(_,2),E=r(w),T=r(E,!0);t(E);var z=l(E,2),X=r(z,!0);t(z),t(w),t(u);var F=l(u,2),Z=r(F),Pe=r(Z,!0);t(Z),t(F),t(p),m((b,f,I)=>{v(T,b),v(X,f),ee(Z,1,`rounded-full px-2 py-1 text-xs font-medium ${I??""}`),v(Pe,e(a).role)},[()=>D(e(a)),()=>ae(e(a)),()=>se(e(a).role)],y),d(i,p)}),t(W);var Se=l(W,2);{var De=i=>{var a=it(),p=l(r(a),2);ce(p,5,()=>e(o).members.filter(u=>u.invitationStatus==="pending"),pe,(u,_)=>{var C=st(),B=r(C),L=l(r(B),2),w=r(L),E=r(w,!0);t(w);var T=l(w,2),z=r(T,!0);t(T),t(L),t(B),Fe(2),t(C),m((X,F)=>{v(E,X),v(z,F)},[()=>D(e(_)),()=>ae(e(_))],y),d(u,C)}),t(p),t(a),d(i,a)};h(Se,i=>{e(o).members.some(a=>a.invitationStatus==="pending")&&i(De)})}t(ve),m(i=>{v(Ae,e(o).name),v(Ce,`${e(o).members.length??""} member${e(o).members.length!==1?"s":""}`),v(Ee,`Created: ${i??""}`)},[()=>new Date(e(o).createdAt).toLocaleDateString()],y),d(A,U)};h(g,A=>{e(o)&&A(M)},k)}};h(s,g=>{e(G)?g(j):g(P,!1)},c)}};h(ye,s=>{e(q)?s(we):s($e,!1)})}t(oe),t(N),ne("click",he,()=>te("/profile")),d(ue,N),Le(),fe()}export{$t as component};
