import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as te,a as oe,$ as ie,s as l,c as s,g as e,m as p,r as a,f as se,n as le,t as R,b as r}from"../chunks/PWWI3Ue3.js";import{t as v,h as ne,a as c,s as j,e as D}from"../chunks/BC15lkC2.js";import{i as T}from"../chunks/BsCQza_p.js";import{e as de,i as ue}from"../chunks/FrGZEVpv.js";import{r as $}from"../chunks/CjOiFDoo.js";import{b as q}from"../chunks/CO0VHtSE.js";import{p as pe}from"../chunks/CWmzcjye.js";import{i as me}from"../chunks/BEc5jUYy.js";import{c as ce}from"../chunks/BcYMahjX.js";import{g as ve}from"../chunks/C5OadaZi.js";var be=v('<div class="mb-4 rounded border border-gray-400 bg-gray-100 px-4 py-3 text-gray-700"><p>Group created successfully! Redirecting...</p></div>'),fe=v('<div class="mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700"><p> </p></div>'),ge=v('<li class="flex items-center justify-between rounded bg-gray-100 px-3 py-2"><span> </span> <button type="button" class="text-red-500 hover:text-red-700">&times;</button></li>'),xe=v('<div class="mt-3"><p class="mb-2 text-sm text-gray-600">Invitees:</p> <ul class="space-y-2"></ul></div>'),ye=v('<form class="rounded-lg border bg-white p-6 shadow-sm"><!> <div class="mb-4"><label for="groupName" class="mb-2 block font-medium text-gray-700">Group Name*</label> <input type="text" id="groupName" class="w-full rounded border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none" placeholder="Enter group name" required></div> <div class="mb-4"><label for="imageUrl" class="mb-2 block font-medium text-gray-700">Group Image URL (optional)</label> <input type="url" id="imageUrl" class="w-full rounded border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none" placeholder="https://example.com/image.jpg"></div> <div class="mb-6"><label class="mb-2 block font-medium text-gray-700">Invite Members (optional)</label> <div class="mb-2 flex"><input type="email" class="flex-1 rounded-l border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none" placeholder="Enter email address"> <button type="button" class="rounded-r bg-black px-4 py-2 text-white hover:bg-gray-800">Add</button></div> <!></div> <div class="flex justify-end"><button type="submit" class="rounded bg-black px-6 py-2 text-white hover:bg-gray-800 disabled:opacity-50"> </button></div></form> <div class="mt-4 text-center"><a href="/groups" class="text-black hover:underline">Back to groups</a></div>',1),_e=v('<div class="container mx-auto max-w-lg px-4 py-8"><h1 class="mb-8 text-3xl font-bold">Create a New Group</h1> <!></div>');function Te(S,z){te(z,!1);let f=p(""),g=p(""),m=p(""),n=p([]),x=p(!1),d=p(null),A=p(!1);function H(){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e(m))){r(d,"Please enter a valid email address");return}if(e(n).some(o=>o.email===e(m))){r(d,"This email is already in the invitees list");return}r(n,[...e(n),{email:e(m)}]),r(m,""),r(d,null)}function J(t){r(n,e(n).filter(o=>o.email!==t))}async function K(){if(!e(f).trim()){r(d,"Group name is required");return}const t={name:e(f).trim(),invitees:e(n)};e(g).trim()&&(t.imageUrl=e(g).trim()),r(x,!0),r(d,null);try{const o=await ce(t);r(A,!0),setTimeout(()=>{ve("/groups")},1500)}catch(o){console.error("Error creating group:",o),r(d,o instanceof Error?o.message:"Failed to create group")}finally{r(x,!1)}}me();var y=_e();ne(t=>{ie.title="Create Group | To-Do App"});var O=l(s(y),2);{var Q=t=>{var o=be();c(t,o)},V=t=>{var o=ye(),_=se(o),B=s(_);{var W=i=>{var u=fe(),b=s(u),N=s(b,!0);a(b),a(u),R(()=>j(N,e(d))),c(i,u)};T(B,i=>{e(d)&&i(W)})}var h=l(B,2),F=l(s(h),2);$(F),a(h);var k=l(h,2),L=l(s(k),2);$(L),a(k);var w=l(k,2),G=l(s(w),2),E=s(G);$(E);var X=l(E,2);a(G);var Y=l(G,2);{var Z=i=>{var u=xe(),b=l(s(u),2);de(b,5,()=>e(n),ue,(N,P)=>{var U=ge(),C=s(U),re=s(C,!0);a(C);var ae=l(C,2);a(U),R(()=>j(re,e(P).email)),D("click",ae,()=>J(e(P).email)),c(N,U)}),a(b),a(u),c(i,u)};T(Y,i=>{e(n).length>0&&i(Z)})}a(w);var M=l(w,2),I=s(M),ee=s(I,!0);a(I),a(M),a(_),le(2),R(()=>{I.disabled=e(x),j(ee,e(x)?"Creating...":"Create Group")}),q(F,()=>e(f),i=>r(f,i)),q(L,()=>e(g),i=>r(g,i)),q(E,()=>e(m),i=>r(m,i)),D("click",X,H),D("submit",_,pe(K)),c(t,o)};T(O,t=>{e(A)?t(Q):t(V,!1)})}a(y),c(S,y),oe()}export{Te as component};
